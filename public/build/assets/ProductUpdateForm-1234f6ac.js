import{_ as h,B as k,i as j,S as D,k as E,o as d,c as f,w as u,e as o,p as v,t as g,a as C,d as _,f as b,r as i}from"./app-34cc9c09.js";import{I as N}from"./ItemImage-7400a6bb.js";import{P as O}from"./ProductDeleteButton-64bbbe63.js";const S={name:"ProductUpdateForm",components:{ProductDeleteButton:O,BasedText:k,ItemImage:N,FontAwesomeIcon:j,ErrorsAlert:D,FullWidthButton:E},emits:["updateProduct","deleteProduct"],data(){return{product:{title:"",metaTitle:"",description:"",previewImage:[],price:-1,discount:0,quantity:0,isAvailable:!1},previousProductPreviewImageUrl:"",validationRules:{title:{required:!0},metaTitle:{required:!0},description:{required:!0},price:{type:"number"},discount:{type:"number"},quantity:{type:"number"},isAvailable:{required:!0}},errors:{}}},props:{pending:{required:!1,type:Boolean,default:!1},requestErrors:{required:!1,type:Object,default:()=>{}},productToUpdate:{required:!1,type:Object,default:()=>{}}},methods:{async onSubmit(){this.errors={},await this.$refs.form.validate((e,t)=>{e?this.onFormValidation():this.errors={...this.errors,validation:[this.$t("profile.mainInformation.errors.validationMessage")]}})},onFormValidation(){const e=Object.assign({},this.product);e.previewImage=e.previewImage.length===1?e.previewImage[0].raw:null,e.isAvailable=e.isAvailable?"1":"0";const t=new FormData;Object.keys(e).forEach(a=>{e[a]!==null&&t.append(a,e[a])}),this.$emit("updateProduct",t)}},watch:{productToUpdate(){const e=this.productToUpdate;this.previousProductPreviewImageUrl=e.previewImage,delete e.previewImage,this.product={...this.product,...e}}}},R={key:0},z={class:"previous-product-preview"},L={class:"product-manipulate-buttons"};function M(e,t,a,W,r,P){const w=i("errors-alert"),s=i("el-input"),n=i("el-form-item"),V=i("font-awesome-icon"),I=i("el-popover"),U=i("el-upload"),y=i("based-text"),q=i("item-image"),p=i("el-input-number"),T=i("el-switch"),A=i("full-width-button"),B=i("product-delete-button"),F=i("el-form");return d(),f(F,{"label-position":"top",rules:r.validationRules,ref:"form",model:r.product},{default:u(()=>{var m,c;return[o(w,{errors:{...a.requestErrors,...r.errors}},null,8,["errors"]),o(n,{label:e.$t("product.updateProduct.title"),prop:"title",class:"form-item"},{default:u(()=>[o(s,{class:"form-item-input",modelValue:r.product.title,"onUpdate:modelValue":t[0]||(t[0]=l=>r.product.title=l)},null,8,["modelValue"])]),_:1},8,["label"]),o(n,{label:e.$t("product.updateProduct.metaTitle"),prop:"metaTitle",class:"form-item"},{default:u(()=>[o(s,{class:"form-item-input",modelValue:r.product.metaTitle,"onUpdate:modelValue":t[1]||(t[1]=l=>r.product.metaTitle=l)},null,8,["modelValue"])]),_:1},8,["label"]),o(n,{label:e.$t("product.updateProduct.description"),prop:"description",class:"form-item"},{default:u(()=>[o(s,{class:"form-item-input",modelValue:r.product.description,"onUpdate:modelValue":t[2]||(t[2]=l=>r.product.description=l),autosize:{minRows:3},type:"textarea"},null,8,["modelValue"])]),_:1},8,["label"]),o(n,{prop:"previewImage",class:"form-item"},{label:u(()=>[v(g(e.$t("product.updateProduct.images.previewImage"))+" ",1),o(I,{placement:"top-start",title:e.$t("general.attention"),trigger:"hover",content:e.$tc("product.updateProduct.images.previewImageInfo",512)},{reference:u(()=>[o(V,{class:"preview-image-info-popover-icon",icon:"circle-info"})]),_:1},8,["title","content"])]),default:u(()=>[o(U,{class:"form-item-input",drag:!0,limit:1,"file-list":r.product.previewImage,"onUpdate:fileList":t[3]||(t[3]=l=>r.product.previewImage=l),"list-type":"picture",accept:"image/png, image/gif, image/jpeg","auto-upload":!1},null,8,["file-list"]),r.previousProductPreviewImageUrl?(d(),C("div",R,[o(y,{title:e.$t("product.updateProduct.images.currentImage")},null,8,["title"]),_("div",z,[o(q,{"image-url":r.previousProductPreviewImageUrl},null,8,["image-url"])])])):b("",!0)]),_:1}),o(n,{label:e.$t("product.updateProduct.price"),prop:"price",class:"form-item"},{default:u(()=>[o(p,{class:"form-item-input",modelValue:r.product.price,"onUpdate:modelValue":t[4]||(t[4]=l=>r.product.price=l)},null,8,["modelValue"])]),_:1},8,["label"]),o(n,{label:e.$t("product.updateProduct.discount"),prop:"discount",class:"form-item"},{default:u(()=>[o(p,{min:0,max:100,class:"form-item-input",modelValue:r.product.discount,"onUpdate:modelValue":t[5]||(t[5]=l=>r.product.discount=l)},null,8,["modelValue"])]),_:1},8,["label"]),o(n,{label:e.$t("product.updateProduct.quantity"),prop:"quantity",class:"form-item"},{default:u(()=>[o(p,{class:"form-item-input",min:0,modelValue:r.product.quantity,"onUpdate:modelValue":t[6]||(t[6]=l=>r.product.quantity=l)},null,8,["modelValue"])]),_:1},8,["label"]),o(n,{label:e.$t("product.updateProduct.isAvailable"),prop:"isAvailable",class:"form-item"},{default:u(()=>[o(T,{class:"form-item-input","active-text":e.$t("product.updateProduct.available"),"inactive-text":e.$t("product.updateProduct.unavailable"),modelValue:r.product.isAvailable,"onUpdate:modelValue":t[7]||(t[7]=l=>r.product.isAvailable=l),size:"large"},null,8,["active-text","inactive-text","modelValue"])]),_:1},8,["label"]),_("div",L,[o(A,{pending:a.pending,onClick:t[8]||(t[8]=l=>P.onSubmit())},{default:u(()=>[v(g(e.$t("general.save")),1)]),_:1},8,["pending"]),(m=a.productToUpdate)!=null&&m.slug?(d(),f(B,{key:0,onDeleteProduct:t[9]||(t[9]=l=>e.$emit("deleteProduct")),slug:(c=a.productToUpdate)==null?void 0:c.slug},null,8,["slug"])):b("",!0)])]}),_:1},8,["rules","model"])}const J=h(S,[["render",M],["__scopeId","data-v-62e5870e"]]);export{J as P};
